# FX繝舌ャ繧ｯ繝・せ繝・/ Codex 菴懈･ｭ繝√Ε繝ｼ繧ｿ繝ｼ
![CI](https://github.com/gaobankirino561-dev/fx-automation/actions/workflows/ci.yml/badge.svg)

## 逶ｮ逧・

- 陬・㍼繝ｻ閾ｪ蜍募｣ｲ雋ｷ繧貞撫繧上★縲√い繧､繝・い谿ｵ髫弱・FX謌ｦ逡･繧定ｿ・溘↓螳夐㍼隧穂ｾ｡縺ｧ縺阪ｋ繝舌ャ繧ｯ繝・せ繝亥渕逶､繧呈紛縺医ｋ縲・
- OHLC CSV 繧貞・蜉帙↓縲√ヰ繝・け繝・せ繝医・繝代Λ繝｡繝ｼ繧ｿ繧ｹ繧､繝ｼ繝励・繝ｩ繝ｳ繧ｭ繝ｳ繧ｰ蜃ｺ蜉帙∪縺ｧ繧定・蜍募喧縲・
- 螳夐㍼隧穂ｾ｡縺ｮ邨先棡縺ｨ菴懈･ｭ繝ｭ繧ｰ繧剃ｸ蜈・ｮ｡逅・＠縲∵姶逡･謾ｹ蝟・・莉ｮ隱ｬ讀懆ｨｼ繧ｵ繧､繧ｯ繝ｫ繧堤洒縺丈ｿ昴▽縲・
- 螳牙・縺ｫ邏譌ｩ縺剰ｩｦ陦後〒縺阪ｋ繧医≧縲∽ｽ懈･ｭ縺ｮ繧ｬ繝ｼ繝峨Ξ繝ｼ繝ｫ繧呈・譁・喧縲・
- Codex・・I繝壹い繝励Ο繧ｰ繝ｩ繝橸ｼ峨→縺ｮ蜊泌ロ繝ｫ繝ｼ繝ｫ繧呈・遒ｺ蛹悶＠縲√メ繝ｼ繝蜈ｨ菴薙・菴懈･ｭ蜉ｹ邇・→蜀咲樟諤ｧ繧帝ｫ倥ａ繧九・

## 蜈･蜃ｺ蜉・

- 蜈･蜉・ `data/ohlc.csv`・医Ο繝ｼ繧ｫ繝ｫ縺ｮ讀懆ｨｼ逕ｨ萓｡譬ｼ繝・・繧ｿ縲∬ｿｽ蜉蜈･蜉帙・ Git LFS 繧・､夜Κ繧ｹ繝医Ξ繝ｼ繧ｸ豢ｻ逕ｨ繧呈､懆ｨ趣ｼ・
- 蜃ｺ蜉・ `results/*.csv`・井ｾ・ `atr_rank.csv`縲～pass_summary_*.csv`縲～equity_*.csv`・・
- 繝ｭ繧ｰ: `logs/*.jsonl`・亥ｮ溯｡後Γ繧ｿ繝・・繧ｿ縲∽ｾ句､悶，odex 菴懈･ｭ繝ｭ繧ｰ・峨ｒ諠ｳ螳・

## 繧ｬ繝ｼ繝峨Ξ繝ｼ繝ｫ・磯㍾隕・ｼ・

- 逕溘ョ繝ｼ繧ｿ繧・腸蠅・､画焚縺ｫ遘伜諺諠・ｱ縺悟性縺ｾ繧後ｋ蝣ｴ蜷医・ `.env` 繧・ｧ伜ｯ・ｮ｡逅・ヤ繝ｼ繝ｫ縺ｫ髫秘屬縺励√Μ繝昴ず繝医Μ縺ｫ縺ｯ蟷ｳ譁・ｿ晏ｭ倥＠縺ｪ縺・・
- 雜ｳ繧翫↑縺・ｾ｡譬ｼ繝・・繧ｿ繧貞叙蠕励☆繧矩圀縺ｯ譌｢蟄倥・遉ｾ蜀・ｼ冗┌譁吶た繝ｼ繧ｹ繧呈ｴｻ逕ｨ縺励∝､夜Κ API 縺ｮ隱ｲ驥代・繝ｩ繝ｳ螟画峩繧・､ｧ驥丞叙蠕励・莠句燕謇ｿ隱阪ｒ蠕励ｋ縲・
- 蟾ｨ螟ｧ繝輔ぃ繧､繝ｫ・域ｦゅ・ 100MB 雜・ｼ峨ｄ繝舌う繝翫Μ繧偵さ繝溘ャ繝医○縺壹∝ｿ・ｦ√↑繧・Git LFS 繧・が繝悶ず繧ｧ繧ｯ繝医せ繝医Ξ繝ｼ繧ｸ繧貞茜逕ｨ縺吶ｋ縲・
- 繝舌ャ繧ｯ繝・せ繝医・閾ｪ蜍募ｮ溯｡悟燕蠕後〒 `git status` 繧堤｢ｺ隱阪＠縲∵э蝗ｳ縺励↑縺・Ρ繝ｼ繧ｯ繝・Μ繝ｼ螟画峩繧・ｷｮ蛻・・蜿悶ｊ縺薙⊂縺励′縺ｪ縺・°遒ｺ隱阪☆繧九・
- 繝舌ャ繝∝ｮ溯｡後せ繧ｯ繝ｪ繝励ヨ縺ｯ繝ｪ繝医Λ繧､閠先ｧ繝ｻ繝ｭ繧ｰ蜃ｺ蜉帙ｒ蛯吶∴縲∝､ｱ謨玲凾縺ｯ exit code 竕 0 縺ｨ縺励※讀懃衍縺ｧ縺阪ｋ繧医≧縺ｫ縺吶ｋ縲・
- 譁ｰ縺励＞謌ｦ逡･繝ｭ繧ｸ繝・け繧・ｸｻ隕∵欠讓吶ｒ蟆主・縺吶ｋ髫帙・縲∵怙蟆城剞縺ｮ繝ｦ繝九ャ繝医ユ繧ｹ繝・or 讀懆ｨｼ繝弱・繝医ｒ繧ｻ繝・ヨ縺ｧ霑ｽ蜉縺励∝・迴ｾ諤ｧ繧堤｢ｺ菫昴☆繧九・
- **邨先棡 CSV 縺ｯ Git 縺ｫ蜷ｫ繧√↑縺・*: `results/*.csv` 繧・`equity_*.csv` 縺ｯ `.gitignore` 縺ｧ髯､螟悶＠縲∝ｿ・ｦ√↓蠢懊§縺ｦ謌先棡迚ｩ繧ｹ繝医Ξ繝ｼ繧ｸ縺ｫ菫晏ｭ倥☆繧九・
- **螟ｧ驥丞ｮ溯｡悟燕縺ｫ繧ｳ繝溘ャ繝亥ｿ・・*: 螟ｧ隕乗ｨ｡縺ｪ繝代Λ繝｡繝ｼ繧ｿ繧ｹ繧､繝ｼ繝励ｄ髟ｷ譎る俣繧ｸ繝ｧ繝悶・蜑阪↓縲∵焔蜈・・螟画峩繧偵さ繝溘ャ繝医＠縺ｦ繝ｭ繝ｼ繝ｫ繝舌ャ繧ｯ蜿ｯ閭ｽ縺ｫ縺励※縺翫￥縲・
- **蜑企勁遖∵ｭ｢**: `data/` 蜴滓悽縲～.git/` 繧貞炎髯､縺励↑縺・ょｿ・ｦ√↑騾驕ｿ縺ｯ蛻･繝・ぅ繝ｬ繧ｯ繝医Μ縺ｧ陦後≧縲・
- **隕∵価隱・*: `config.yaml` 縺ｮ螟ｧ蟷・､画峩縲～OB_MAXDD_STOP` 繝代Λ繝｡繝ｼ繧ｿ縺ｮ蠅玲ｸ帙∝､夜Κ縺ｸ騾∽ｿ｡縺吶ｋ蜃ｦ逅・・莠句燕縺ｫ謇ｿ隱阪ｒ蠕励ｋ縲・

## 繧医￥菴ｿ縺・さ繝槭Φ繝会ｼ井ｾ具ｼ・

- `git status` - 繧ｳ繝溘ャ繝亥燕蠕後・蟾ｮ蛻・ｄ譛ｪ霑ｽ霍｡繝輔ぃ繧､繝ｫ繧堤｢ｺ隱阪・
- `git commit -am "checkpoint before sweep"` - 螟ｧ驥丞ｮ溯｡悟燕縺ｮ騾驕ｿ繧ｳ繝溘ャ繝医ｒ菴懈・縲・
- `python scripts/backtest.py --config config.yaml --input data/ohlc.csv --output results/` - 蜊倅ｸ謌ｦ逡･縺ｮ繝舌ャ繧ｯ繝・せ繝医ｒ螳溯｡後・
- `pwsh -File scripts/run_sweep.ps1 -Config config.yaml -OutputDir results` - 繝代Λ繝｡繝ｼ繧ｿ繧ｹ繧､繝ｼ繝励ｒ PowerShell 縺ｧ螳溯｡後・
- `py demo_run.py` - 1蝗樒岼 API / 2蝗樒岼 Cache Hit 縺ｮ蜍穂ｽ懃｢ｺ隱阪・
- `py sweep_fast.py` - 遏ｭ譎る俣縺ｧ縺ｮ鬮倬溘せ繧､繝ｼ繝励ｒ螳溯｡後・
- `py rank_full.py` - ATR ﾃ・KTP/KSL ﾃ・TREND 繝ｩ繝ｳ繧ｭ繝ｳ繧ｰ繧堤函謌舌・
- `$env:WF_SPLITS="6"; py wf_validate.py` - 迺ｰ蠅・､画焚繧定ｨｭ螳壹＠縺ｦ讀懆ｨｼ蛻・牡繧貞ｮ溯｡後・
- `python -m pytest tests/ -k backtest` - 繝舌ャ繧ｯ繝・せ繝磯未騾｣縺ｮ繝ｦ繝九ャ繝医ユ繧ｹ繝医ｒ驛ｨ蛻・ｮ溯｡後・
- `Get-Content logs/latest.jsonl -Tail 20` - 逶ｴ霑代Ο繧ｰ縺ｮ譛ｫ蟆ｾ20陦後ｒ遒ｺ隱阪・

## 迺ｰ蠅・､画焚縺ｮ萓・

- `WF_SPLITS` - Walk-forward 讀懆ｨｼ縺ｮ蛻・牡謨ｰ・井ｾ・ 6・峨ゅヰ繝・メ螳溯｡悟燕縺ｫ PowerShell 迺ｰ蠅・〒險ｭ螳壹＠縺ｦ縺翫￥縲・
- `RESULTS_DIR` - CSV 繧・Ο繧ｰ繧帝驕ｿ縺吶ｋ繝代せ・域欠螳壹′縺ｪ縺・ｴ蜷医・ `results/` 繧剃ｽｿ逕ｨ・峨・
- `API_TOKEN` - 螟夜Κ萓｡譬ｼ繝・・繧ｿ API 縺ｮ繝医・繧ｯ繝ｳ縲Ａ.env` 縺ｪ縺ｩ遘伜諺鬆伜沺縺ｧ邂｡逅・＠縲√さ繝ｼ繝峨↓縺ｯ逶ｴ譖ｸ縺阪＠縺ｪ縺・・
- `OB_MAXDD_STOP` - 譛螟ｧ繝峨Ο繝ｼ繝繧ｦ繝ｳ髢ｾ蛟､縲ょ､画峩譎ゅ・莠句燕謇ｿ隱阪′蠢・ｦ√・
- `CODEx_RUN_ID` - Codex 菴懈･ｭ繝ｭ繧ｰ逕ｨ縺ｮ繧ｻ繝・す繝ｧ繝ｳ隴伜挨蟄撰ｼ井ｻｻ諢擾ｼ峨ゅΟ繧ｰ繝｡繧ｿ繝・・繧ｿ縺ｫ莉倅ｸ弱☆繧九→霑ｽ霍｡縺悟ｮｹ譏薙・
- `OHLC_CSV` - 繝舌ャ繧ｯ繝・せ繝亥ｮ溯｡梧凾縺ｫ蜿ら・縺吶ｋ OHLC CSV 繝代せ・井ｾ・ `./data/ohlc.csv`・峨・
- `OB_MAXDD_STOP` - 譛螟ｧ繝峨Ο繝ｼ繝繧ｦ繝ｳ髢ｾ蛟､縺ｮ繝・ヵ繧ｩ繝ｫ繝茨ｼ井ｾ・ `20`・峨よ価隱榊ｾ後↓譖ｴ譁ｰ縺励√さ繝ｼ繝峨∈縺ｯ迺ｰ蠅・､画焚邨檎罰縺ｧ貂｡縺吶・

## 菫晏ｭ假ｼ医さ繝溘ャ繝茨ｼ峨ち繧､繝溘Φ繧ｰ謗ｨ螂ｨ

- 繝舌ャ繧ｯ繝・せ繝医Ο繧ｸ繝・け縺ｮ螟ｧ縺阪↑螟画峩繧定｡後▲縺溽峩蠕鯉ｼ域里蟄俶姶逡･縺ｫ蠖ｱ髻ｿ縺悟・繧九◆繧・ｼ峨・
- 譁ｰ縺励＞謌ｦ逡･繧・欠讓吶ｒ霑ｽ蜉縺励・未騾｣繝・せ繝医・繧ｵ繝ｳ繝励Ν繧剃ｽ懈・縺励◆繧ｿ繧､繝溘Φ繧ｰ縲・
- 螟ｧ驥丞ｮ滄ｨ難ｼ医ヱ繝ｩ繝｡繝ｼ繧ｿ繧ｹ繧､繝ｼ繝励√え繧ｩ繝ｼ繧ｯ繝輔か繝ｯ繝ｼ繝画､懆ｨｼ縺ｪ縺ｩ・峨ｒ螳溯｡後☆繧狗峩蜑阪・
- 繧ｬ繝ｼ繝峨Ξ繝ｼ繝ｫ蟇ｾ雎｡縺ｮ險ｭ螳壼､繧貞､画峩縺励◆縺ｨ縺搾ｼ域価隱肴ｸ医∩縺ｮ蜀・ｮｹ繧呈・遒ｺ縺ｫ谿九☆・峨・
- 蝠城｡後・蛻・ｊ蛻・￠逕ｨ縺ｫ荳譎ら噪縺ｪ螳滄ｨ薙ヶ繝ｩ繝ｳ繝√ｒ菴懈・縺励◆蝣ｴ蜷医・縲∵怙蟆乗ｧ区・縺ｧ繧ｳ繝溘ャ繝医＠縺ｦ縺翫￥縲・
- 繝槭う繝ｫ繧ｹ繝医・繝ｳ・井ｻ墓ｧ倩ｿｽ蜉縲∝､ｧ謗・勁縲√ョ繧｣繝ｬ繧ｯ繝医Μ讒区・螟画峩縺ｪ縺ｩ・峨・逶ｴ蜑咲峩蠕後〒蛹ｺ蛻・ｊ繧呈・遒ｺ縺ｫ縺吶ｋ縲・
- 驥崎ｦ∬ｨｭ螳壹・螟画峩蜑榊ｾ後√ず繝ｧ繝門ｮ瑚ｵｰ逶ｴ蠕後・｣邯壻ｽ懈･ｭ荳ｭ縺ｪ繧・30-60 蛻・↓ 1 蝗槭・鬆ｻ蠎ｦ縺ｧ縺薙∪繧√↓繧ｳ繝溘ャ繝医☆繧九・

## 譌｢遏･縺ｮ豕ｨ諢・

- PowerShell・・p932・臥腸蠅・〒縺ｯ `-` 縺ｪ縺ｩ縺ｮ蜈ｨ隗偵ム繝・す繝･縺梧枚蟄怜喧縺代☆繧九◆繧√ヽEADME 繧・Ο繧ｰ縺ｧ縺ｯ ASCII 縺ｮ `-` 繧剃ｽｿ逕ｨ縺吶ｋ縲・
- `results/` 驟堺ｸ九・ `.gitignore` 邂｡逅・・縺溘ａ縲∽ｻ也ｫｯ譛ｫ縺ｧ蜀榊ｮ溯｡後＠縺ｪ縺・→ CSV 縺悟ｭ伜惠縺励↑縺・せ縺ｫ豕ｨ諢上・
- API 螳溯｡後ョ繝｢・・demo_run.py` 縺ｪ縺ｩ・峨・螟夜Κ繝医・繧ｯ繝ｳ縺梧悴險ｭ螳壹□縺ｨ API 蜻ｼ縺ｳ蜃ｺ縺怜・縺悟､ｱ謨励☆繧九◆繧√～.env` 縺ｫ `API_TOKEN` 繧定ｨｭ螳壹＠縺ｦ縺九ｉ隧ｦ縺吶・
- 蟾ｨ螟ｧ CSV 繧・・蜉・CSV 縺ｯ Git 邂｡逅・､悶↓鄂ｮ縺阪∝ｮｹ驥剰ぇ螟ｧ繧・ｫｶ蜷医ｒ驕ｿ縺代ｋ縲ょｿ・ｦ√↑蝣ｴ蜷医・謌先棡縺ｮ縺ｿ繧帝寔險医・隕∫ｴ・＠縺ｦ菫晉ｮ｡縺吶ｋ縲・
- PowerShell 繧ｻ繝・す繝ｧ繝ｳ繧定ｷｨ縺舌→荳譎ょ､画焚・井ｾ・ `$sorted`・峨′螟ｱ繧上ｌ繧九◆繧√∝ｿ・ｦ√↑繝・・繧ｿ縺ｯ CSV 遲峨↓繧ｨ繧ｯ繧ｹ繝昴・繝医＠縺ｦ縺九ｉ蜀榊茜逕ｨ縺吶ｋ縲・

## 遽・峇 / 髱樒ｯ・峇

- 遽・峇: OHLC CSV 縺九ｉ縺ｮ繝・・繧ｿ繝ｭ繝ｼ繝峨√ヰ繝・け繝・せ繝亥ｮ溯｣・√ヱ繝ｩ繝｡繝ｼ繧ｿ繧ｹ繧､繝ｼ繝励∵欠讓呵ｨ育ｮ励√Λ繝ｳ繧ｭ繝ｳ繧ｰ蜃ｺ蜉帙∵､懆ｨｼ邨先棡縺ｮ蜿ｯ隕門喧縺ｨ繝ｭ繧ｰ菫晉ｮ｡縲・
- 遽・峇: Codex 縺ｨ縺ｮ蜊泌ロ繝ｫ繝ｼ繝ｫ遲門ｮ壹∬ｩｦ陦後・繝ｭ繧ｻ繧ｹ縺ｮ繝・Φ繝励Ξ繝ｼ繝亥喧縲∬・蜍輔ユ繧ｹ繝医→蜀咲樟諤ｧ遒ｺ菫昴・莉慕ｵ・∩縺･縺上ｊ縲・
- 遽・峇: `*.py` 縺ｮ謾ｹ菫ｮ縲～results/` 縺ｸ縺ｮ CSV 蜃ｺ蜉帙￣owerShell 縺ｧ縺ｮ繝舌ャ繝∝ｮ溯｡後・
- 髱樒ｯ・峇: 繝ｪ繧｢繝ｫ繝槭ロ繝ｼ繝医Ξ繝ｼ繝峨・閾ｪ蜍募濤陦後∝､夜Κ繝悶Ο繝ｼ繧ｫ繝ｼ API 騾｣謳ｺ縲∵悽逡ｪ驕狗畑逶｣隕悶∵ｳ穂ｻ､繝ｻ繧ｳ繝ｳ繝励Λ繧､繧｢繝ｳ繧ｹ蟇ｾ蠢懊・
- 髱樒ｯ・峇: 蟾ｨ螟ｧ逕溘ョ繝ｼ繧ｿ縺ｮ Git 蜿悶ｊ霎ｼ縺ｿ縲∝､夜Κ API 隱ｲ驥代・螟画峩縲∫ｧ伜諺諠・ｱ縺ｮ蟷ｳ譁・ｿ晏ｭ倥・
